<!DOCTYPE html>
<html>
<head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Padauk:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .interactive-item { cursor: pointer; }
        .hidden { display: none; }
        .banner-slide { transition: opacity 1s ease-in-out; }
        #topupContent { font-family: 'Padauk', sans-serif; }
        .selected-operator, .selected-amount, .selected-payment {
            border-color: #3B82F6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
            transform: scale(1.05);
        }
    </style>
    <title>PS Game Store</title>
</head>
<body class="bg-slate-800 p-4 sm:p-6">

<div id="mainContainer" class="bg-gray-200 p-8 w-full min-h-screen rounded-lg shadow-xl mx-auto max-w-6xl">
    
    <div class="relative z-20 bg-slate-800 text-white flex items-center justify-between mb-6 p-4 rounded-lg shadow-md">
        <a id="shop-logo-link" href="#" class="flex-shrink-0 flex items-center gap-2 interactive-item">
            <img src="https://drive.google.com/thumbnail?id=15MbzA94gFShft3ydeboDN_8Ap9M72K8Q&sz=w500" alt="PS GAME STORE Logo" class="h-12 w-12 rounded-full shadow-md">
            <h1 class="text-xl font-bold text-white">PS GAME STORE</h1>
        </a>
    </div>

    <div id="mainContentWrapper">
        <div class="flex flex-col items-center mb-6 text-center">
            <div id="bannerSlideshowContainer" class="relative mb-9 rounded-lg overflow-hidden shadow-md w-full aspect-[21/9]">
                <img src="https://drive.google.com/thumbnail?id=15PS_2FE1HIbXvis-Mz0cKY5sMZhWlqGt&sz=w500" alt="Banner 1" class="banner-slide absolute top-0 left-0 w-full h-full object-cover opacity-100">
                <img src="https://drive.google.com/thumbnail?id=14UIpJuoo17jqhq0fu0isWD3DdUR1arT5&sz=w500" alt="Banner 2" class="banner-slide absolute top-0 left-0 w-full h-full object-cover opacity-0">
                <img src="https://drive.google.com/thumbnail?id=15IL2-gk5pe6xyI9Vrk3GGocxPL2F5TLJ&sz=w500" alt="Banner 3" class="banner-slide absolute top-0 left-0 w-full h-full object-cover opacity-0">
                <img src="https://placehold.co/600x240/334155/E2E8F0?text=PS+Game+Store" alt="Banner 4" class="banner-slide absolute top-0 left-0 w-full h-full object-cover opacity-0">
            </div>
        </div>

        <div id="gameSelectionContainer" class="text-center bg-white p-6 rounded-lg shadow-md mt-6">
            <h2 class="text-2xl font-bold my-6 text-gray-800">ဝန်ဆောင်မှုတစ်ခု ရွေးချယ်ပါ</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                <button class="relative flex flex-col items-center p-6 bg-gray-50 rounded-lg shadow-md hover:shadow-lg interactive-item game-btn" data-game-id="mlbb">
                    <span class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">Hot Sale</span>
                    <img src="https://drive.google.com/thumbnail?id=14_RThMWD-OWrmD7R2rTM3gsjLMUtzWNL&sz=w500" alt="MLBB Logo" class="h-16 w-auto mb-4 rounded-lg">
                    <h2 class="text-xl font-bold text-gray-800">Mobile Legends</h2>
                </button>
                <button class="relative flex flex-col items-center p-6 bg-gray-50 rounded-lg shadow-md hover:shadow-lg interactive-item game-btn" data-game-id="pubg">
                    <span class="absolute top-2 right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full">Hot Sale</span>
                    <img src="https://drive.google.com/thumbnail?id=15Dapkfgx8Xy0gnEbXoLK51KcrBH6DDqL&sz=w500" alt="PUBG Logo" class="h-16 w-auto mb-4 rounded-lg">
                    <h2 class="text-xl font-bold text-gray-800">PUBG Mobile</h2>
                </button>
                <button id="topup-btn" class="relative flex flex-col items-center p-6 bg-gray-50 rounded-lg shadow-md hover:shadow-lg interactive-item">
                    <span class="absolute top-2 right-2 bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full">SIM Top Up</span>
                     <svg class="h-16 w-auto mb-4 text-sky-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                         <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
                     </svg>
                    <h2 class="text-xl font-bold text-gray-800">ဖုန်းဘေလ်ဖြည့်ရန်</h2>
                </button>
            </div>
        </div>
    </div>

    <div id="mlbbContent" class="hidden"></div>
    <div id="pubgContent" class="hidden"></div>
    
    <div id="topupContent" class="hidden">
        <form id="topupForm" action="https://formsubmit.co/your-real-email@example.com" method="POST" enctype="multipart/form-data">
            <div class="flex items-center justify-between mb-6 mt-4">
                  <button type="button" onclick="goHome()" class="bg-gray-200 text-gray-700 p-2 rounded-full hover:bg-gray-300 interactive-item"> &lt; Back </button>
                  <h2 class="text-lg font-bold text-gray-800">Myanmar SIM Top Up</h2>
                  <div class="w-10"></div>
            </div>
            <div class="w-full max-w-md bg-white rounded-2xl shadow-lg p-6 md:p-8 space-y-6 mx-auto">
                <div class="text-center">
                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800">မိုဘိုင်းလ်ဖုန်း ဘေလ်ဖြည့်ရန်</h1>
                    <p class="text-gray-500 mt-1">သင်၏ ဖုန်းနံပါတ်ထည့်သွင်းပြီး ဘေလ်ဖြည့်ပါ</p>
                </div>
                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-700 mb-1">ဖုန်းနံပါတ်</label>
                    <input type="tel" id="phone" name="Phone Number" placeholder="ဥပမာ - 09xxxxxxxxx" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200" oninput="detectOperator(this.value)" required>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">ဖုန်းလိုင်း ရွေးချယ်ပါ</h3>
                    <div class="grid grid-cols-4 gap-3">
                        <div id="op-mpt" class="operator-card flex justify-center items-center p-2 border-2 border-gray-200 rounded-lg cursor-pointer" onclick="selectItem('operator', 'op-mpt')">
                             <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MPT_logo_2022.svg" alt="MPT" class="h-10">
                        </div>
                        <div id="op-ooredoo" class="operator-card flex justify-center items-center p-2 border-2 border-gray-200 rounded-lg cursor-pointer" onclick="selectItem('operator', 'op-ooredoo')">
                             <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fa/Ooredoo_logo.svg/2560px-Ooredoo_logo.svg.png" alt="Ooredoo" class="h-8">
                        </div>
                        <div id="op-atom" class="operator-card flex justify-center items-center p-2 border-2 border-gray-200 rounded-lg cursor-pointer" onclick="selectItem('operator', 'op-atom')">
                             <img src="https://www.atom.com.mm/themes/atom/logo.svg" alt="ATOM" class="h-10">
                        </div>
                        <div id="op-mytel" class="operator-card flex justify-center items-center p-2 border-2 border-gray-200 rounded-lg cursor-pointer" onclick="selectItem('operator', 'op-mytel')">
                             <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Mytel_logo.svg/1280px-Mytel_logo.svg.png" alt="Mytel" class="h-10">
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">ငွေပမာဏ ရွေးချယ်ပါ (ကျပ်)</h3>
                    <div class="grid grid-cols-3 gap-3">
                        <div id="amount-1000" class="amount-card text-center font-bold p-4 border-2 rounded-lg cursor-pointer" onclick="selectItem('amount', 'amount-1000', 1000)">1,000</div>
                        <div id="amount-3000" class="amount-card text-center font-bold p-4 border-2 rounded-lg cursor-pointer" onclick="selectItem('amount', 'amount-3000', 3000)">3,000</div>
                        <div id="amount-5000" class="amount-card text-center font-bold p-4 border-2 rounded-lg cursor-pointer" onclick="selectItem('amount', 'amount-5000', 5000)">5,000</div>
                        <div id="amount-10000" class="amount-card text-center font-bold p-4 border-2 rounded-lg cursor-pointer" onclick="selectItem('amount', 'amount-10000', 10000)">10,000</div>
                        <div id="amount-20000" class="amount-card text-center font-bold p-4 border-2 rounded-lg cursor-pointer" onclick="selectItem('amount', 'amount-20000', 20000)">20,000</div>
                        <div id="amount-30000" class="amount-card text-center font-bold p-4 border-2 rounded-lg cursor-pointer" onclick="selectItem('amount', 'amount-30000', 30000)">30,000</div>
                    </div>
                </div>
                <div>
                    <h3 class="text-lg font-semibold text-gray-700 mb-3">ငွေပေးချေမှုစနစ် ရွေးချယ်ပါ</h3>
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div id="payment-scb" class="payment-card flex flex-col items-center justify-center p-3 border-2 rounded-lg cursor-pointer" onclick="selectItem('payment', 'payment-scb')">
                             <img src="https://drive.google.com/thumbnail?id=141mrU3g96CgFtE2OtzfNvpCaxHZmnQkA&sz=w500" alt="SCB Logo" class="h-8 mb-2"><span class="font-semibold text-sm">SCB Easy</span>
                        </div>
                         <div id="payment-promptpay" class="payment-card flex flex-col items-center justify-center p-3 border-2 rounded-lg cursor-pointer" onclick="selectItem('payment', 'payment-promptpay')">
                             <img src="https://drive.google.com/thumbnail?id=13DJ6Llz6dl4DehZw1rRZAwMIZFvFaIr8&sz=w500" alt="PromptPay Logo" class="h-8 mb-2"><span class="font-semibold text-sm">PromptPay</span>
                        </div>
                         <div id="payment-truemoney" class="payment-card flex flex-col items-center justify-center p-3 border-2 rounded-lg cursor-pointer" onclick="selectItem('payment', 'payment-truemoney')">
                             <img src="https://drive.google.com/thumbnail?id=149aT4E1C4i-m12DZ9R0iAy8qqkCf4QRC&sz=w500" alt="TrueMoney Logo" class="h-8 mb-2"><span class="font-semibold text-sm">TrueMoney</span>
                        </div>
                    </div>
                </div>
                <div id="topupPaymentDetailsContainer" class="mt-4">
                    <div id="topup-scbPaymentDetails" class="payment-detail-topup bg-gray-100 p-6 rounded-lg hidden text-center">... SCB Details ...</div>
                    <div id="topup-promptpayPaymentDetails" class="payment-detail-topup bg-gray-100 p-6 rounded-lg hidden text-center">... PromptPay Details ...</div>
                    <div id="topup-truemoneyPaymentDetails" class="payment-detail-topup bg-gray-100 p-6 rounded-lg hidden text-center">... TrueMoney Details ...</div>
                </div>
                <div>
                    <label for="topupPaySlipFile" class="block text-sm font-medium text-gray-700 mb-1">ငွေလွှဲပြေစာထည့်ရန်</label>
                    <input type="file" id="topupPaySlipFile" name="Attachment" required class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100">
                </div>
                <input type="hidden" id="selectedOperatorInput" name="Operator">
                <input type="hidden" id="selectedAmountInput" name="Amount (MMK)">
                <input type="hidden" id="selectedPaymentInput" name="Payment Method">
                <input type="hidden" name="_subject" value="New SIM Top-up Order!">
                <input type="hidden" name="_captcha" value="false">
                
                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700">ဘေလ်ဖြည့်မည်</button>
            </div>
        </form>
    </div>
    
    <div id="paymentAndFormSection" class="hidden">
        <h2 class="text-2xl font-bold mt-6 mb-4 text-gray-800 text-center">ငွေပေးချေမှုအချက်အလက်များ</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 mt-4">
             <button type="button" class="payment-btn flex items-center justify-between w-full p-3 bg-white rounded-lg shadow-md interactive-item" data-payment-method="scb">...</button>
             <button type="button" class="payment-btn flex items-center justify-between w-full p-3 bg-white rounded-lg shadow-md interactive-item" data-payment-method="promptpay">...</button>
             <button type="button" class="payment-btn flex items-center justify-between w-full p-3 bg-white rounded-lg shadow-md interactive-item" data-payment-method="truemoney">...</button>
             <button type="button" class="payment-btn flex items-center justify-between w-full p-3 bg-white rounded-lg shadow-md interactive-item" data-payment-method="kbz">...</button>
             <button type="button" class="payment-btn flex items-center justify-between w-full p-3 bg-white rounded-lg shadow-md interactive-item" data-payment-method="wave">...</button>
        </div>
        <div id="paymentDetailsContainer">
             <div id="scbPaymentDetails" class="bg-gray-100 p-6 rounded-lg hidden text-center">... SCB Details ...</div>
             <div id="promptpayPaymentDetails" class="bg-gray-100 p-6 rounded-lg hidden text-center">... PromptPay Details ...</div>
             <div id="truemoneyPaymentDetails" class="bg-gray-100 p-6 rounded-lg hidden text-center">... TrueMoney Details ...</div>
             <div id="kbzPaymentDetails" class="bg-gray-100 p-6 rounded-lg hidden text-center">... KBZ Details ...</div>
             <div id="wavePaymentDetails" class="bg-gray-100 p-6 rounded-lg hidden text-center">... Wave Details ...</div>
        </div>
        <div id="formContainer" class="hidden">
            <form id="dataForm" action="https://formsubmit.co/your-real-email@example.com" method="POST" enctype="multipart/form-data" class="space-y-4">
                <input type="hidden" id="selectedItemInput" name="Selected Package">
                <input type="hidden" id="selectedPaymentMethodInput" name="Payment Method">
                <input type="hidden" id="selectedGameInput" name="Game">
                
                <div><label for="gameIdInput">Game ID:</label><input type="text" id="gameIdInput" name="Game ID" required class="w-full border rounded p-2 mt-1"></div>
                <div id="serverIdInputContainer"><label for="serverIdInput">Server ID:</label><input type="text" id="serverIdInput" name="Server ID" class="w-full border rounded p-2 mt-1"></div>
                <div><label for="gmailInput">Gmail:</label><input type="email" id="gmailInput" name="Gmail" required class="w-full border rounded p-2 mt-1"></div>
                <div><label for="paySlipFileInput">Pay Slip Photo:</label><input type="file" id="paySlipFileInput" name="Attachment" required class="w-full mt-1"></div>
                
                <input type="hidden" name="_subject" value="New Game Top-up Order!">
                <input type="hidden" name="_captcha" value="false">

                <button type="submit" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg interactive-item">အချက်အလက် တင်ရန်</button>
            </form>
        </div>
    </div>
    
    <div id="notesSection" class="bg-white p-6 rounded-lg shadow-md mt-6 text-left">... Important Notes ...</div>
    <div id="contactSection" class="bg-white p-6 rounded-lg shadow-md mt-6 text-center">... Contact Info ...</div>
    
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    goHome();
    attachAllEventListeners();
    startBannerSlideshow();
});

function startBannerSlideshow() { /* ... Same as before ... */ }

function attachAllEventListeners() {
    document.getElementById('shop-logo-link').addEventListener('click', (e) => { e.preventDefault(); goHome(); });
    document.querySelectorAll('.game-btn').forEach(btn => btn.addEventListener('click', handleGameSelection));
    document.getElementById('topup-btn').addEventListener('click', showTopupContent);
    document.getElementById('mainContainer').addEventListener('click', handleDynamicClicks);

    // Add validation listener for the top-up form
    document.getElementById('topupForm').addEventListener('submit', function(event) {
        if (!validateTopupForm()) {
            event.preventDefault(); // Stop submission if validation fails
        } else {
            // Populate hidden fields before submitting
            document.getElementById('selectedOperatorInput').value = selectedOperator;
            document.getElementById('selectedAmountInput').value = selectedAmount;
            document.getElementById('selectedPaymentInput').value = selectedPayment;
        }
    });
}

// State variables for Top-up
let selectedOperator = null;
let selectedAmount = null;
let selectedPayment = null;

function handleGameSelection(event) {
    const gameId = event.currentTarget.getAttribute('data-game-id');
    showGameContent(gameId);
}

function detectOperator(value) { /* ... Same as before ... */ }

function showTopupContent() {
    document.getElementById('mainContentWrapper').classList.add('hidden');
    document.getElementById('mlbbContent').classList.add('hidden');
    document.getElementById('pubgContent').classList.add('hidden');
    document.getElementById('paymentAndFormSection').classList.add('hidden');
    document.getElementById('topupContent').classList.remove('hidden');
}

function selectItem(type, elementId, value = null) {
    const items = document.querySelectorAll(`.${type}-card`);
    items.forEach(item => {
        let className = `selected-${type}`;
        item.classList.remove(className);
    });

    const selectedElement = document.getElementById(elementId);
    if (selectedElement) {
        let className = `selected-${type}`;
        selectedElement.classList.add(className);
    }
    
    if (type === 'operator') {
        selectedOperator = elementId.split('-')[1] || null;
    } else if (type === 'amount') {
        selectedAmount = value;
    } else if (type === 'payment') {
        selectedPayment = elementId.split('-')[1] || null;
        document.querySelectorAll('.payment-detail-topup').forEach(div => div.classList.add('hidden'));
        if (selectedPayment) {
            const detailDiv = document.getElementById(`topup-${selectedPayment}PaymentDetails`);
            if (detailDiv) detailDiv.classList.remove('hidden');
        }
    }
}

function validateTopupForm() {
    const phoneInput = document.getElementById('phone');
    const paySlipInput = document.getElementById('topupPaySlipFile');
    const phoneNumber = phoneInput.value.trim();

    if (!phoneNumber || !/^(09|\+959)\d{7,9}$/.test(phoneNumber)) {
        alert('ကျေးဇူးပြု၍ မှန်ကန်သော ဖုန်းနံပါတ်တစ်ခု ထည့်သွင်းပါ။');
        return false;
    }
    if (!selectedOperator) {
        alert('ကျေးဇူးပြု၍ ဖုန်းလိုင်းတစ်ခု ရွေးချယ်ပါ။');
        return false;
    }
    if (!selectedAmount) {
        alert('ကျေးဇူးပြု၍ ငွေပမာဏတစ်ခု ရွေးချယ်ပါ။');
        return false;
    }
    if (!selectedPayment) {
        alert('ကျေးဇူးပြု၍ ငွေပေးချေမှုစနစ်တစ်ခု ရွေးချယ်ပါ။');
        return false;
    }
    if (!paySlipInput.files || paySlipInput.files.length === 0) {
        alert('ကျေးဇူးပြု၍ ငွေလွှဲပြေစာ ထည့်သွင်းပါ။');
        return false;
    }
    return true;
}

function handleDynamicClicks(event) {
    const target = event.target;
    const buyNowBtn = target.closest('.buy-now-btn');
    const paymentBtn = target.closest('.payment-btn');

    if (buyNowBtn) {
        const itemName = buyNowBtn.getAttribute('data-item-name');
        const priceText = buyNowBtn.getAttribute('data-price');
        showPaymentSection({ itemName, priceText });
        return;
    }
    
    if (paymentBtn) {
        const method = paymentBtn.getAttribute('data-payment-method');
        document.getElementById('selectedPaymentMethodInput').value = method;
        document.querySelectorAll('#paymentDetailsContainer > div').forEach(div => div.classList.add('hidden'));
        const detailDiv = document.getElementById(`${method}PaymentDetails`);
        if (detailDiv) detailDiv.classList.remove('hidden');
        document.getElementById('formContainer').classList.remove('hidden');
        document.getElementById('paymentAndFormSection').scrollIntoView({ behavior: 'smooth' });
    }
}

function goHome() {
    document.getElementById('mainContentWrapper').classList.remove('hidden');
    document.getElementById('mlbbContent').classList.add('hidden');
    document.getElementById('pubgContent').classList.add('hidden');
    document.getElementById('topupContent').classList.add('hidden');
    document.getElementById('paymentAndFormSection').classList.add('hidden');
}

function showGameContent(gameId) {
    document.getElementById('mainContentWrapper').classList.add('hidden');
    document.getElementById('topupContent').classList.add('hidden');
    document.getElementById('selectedGameInput').value = gameId; 
    
    const serverIdContainer = document.getElementById('serverIdInputContainer');
    const serverIdInput = document.getElementById('serverIdInput');
    
    if (gameId === 'mlbb') {
        document.getElementById('mlbbContent').classList.remove('hidden');
        document.getElementById('pubgContent').classList.add('hidden');
        serverIdContainer.classList.remove('hidden');
        serverIdInput.required = true;
    } else if (gameId === 'pubg') {
        document.getElementById('pubgContent').classList.remove('hidden');
        document.getElementById('mlbbContent').classList.add('hidden');
        serverIdContainer.classList.add('hidden');
        serverIdInput.required = false;
    }
    generateContentForGame(gameId);
}

function showPaymentSection(itemData) {
    const paymentDiv = document.getElementById('paymentAndFormSection');
    paymentDiv.classList.remove('hidden');
    
    document.getElementById('selectedItemInput').value = itemData.itemName;
    document.querySelectorAll('.payment-package-info').forEach(span => {
        span.textContent = `${itemData.priceText}`;
    });
    
    paymentDiv.scrollIntoView({ behavior: 'smooth' });
}

const priceList = { /* ... Same as before ... */ };
function generateContentForGame(gameId) { /* ... Same as before ... */ }
function getIconUrl(gameId, itemName) { /* ... Same as before ... */ }

</script>
</body>
</html>
